language: node_js
node_js:
  - '8'
sudo: required
before_install:
  - if [ "$TRAVIS_OS_NAME" = "linux" ]; then sudo apt-get install libsecret-1-dev          ; fi
  - yarn electron-rebuild
  - npm install -g node-gyp
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-5
    - rpm
matrix:
  include:
  - os: windows
  - os: osx
cache:
  yarn: true
notifications:
  email: false
script:
  - if [ "$TRAVIS_OS_NAME" = "windows" ]; then yarn package-all          ; fi
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then yarn package-all          ; fi
deploy:
  provider: releases
  api_key: $GITHUB_TOKEN
  skip_cleanup: true
  on:
    tags: true